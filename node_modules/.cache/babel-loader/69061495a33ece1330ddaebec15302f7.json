{"ast":null,"code":"import _slicedToArray from \"/Users/luisbenavides/Sites/listview-master-detail-viewdemo/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/luisbenavides/Sites/listview-master-detail-viewdemo/src/components/app.js\";\nimport React, { useState } from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport \"./../assets/scss/style.scss\";\nimport { ALL_CHARACTERS } from \"../queries\";\nimport ErrorView from \"../views/errorView\";\nimport LoadingView from \"../views/loadingView\";\nimport CharactersView from \"../views/charactersView\";\nexport default function App() {\n  let _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      characters = _useState2[0],\n      setCharacters = _useState2[1];\n\n  let _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      after = _useState4[0],\n      setAfter = _useState4[1];\n\n  let _useState5 = useState(5),\n      _useState6 = _slicedToArray(_useState5, 1),\n      length = _useState6[0];\n\n  let character = useState(null);\n\n  let _useState7 = useState(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      hasNext = _useState8[0],\n      setHasNext = _useState8[1];\n\n  let _useState9 = useState(1),\n      _useState10 = _slicedToArray(_useState9, 1),\n      counter = _useState10[0];\n\n  const _useQuery = useQuery(ALL_CHARACTERS, {\n    variables: {\n      after: after,\n      length: length\n    },\n    onCompleted: async () => {\n      if (hasNext && counter < length) {\n        counter++;\n        return new Promise(resolve => {\n          setTimeout(() => {\n            resolve(refetch({\n              after: after,\n              length: length\n            }));\n          }, 1000);\n        });\n      }\n    }\n  }),\n        loading = _useQuery.loading,\n        error = _useQuery.error,\n        data = _useQuery.data,\n        refetch = _useQuery.refetch;\n\n  if (loading) return React.createElement(LoadingView, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  });\n  if (error) return React.createElement(ErrorView, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  });\n  setCharacters([...characters, ...data.allPeople.edges]);\n  setAfter(data.allPeople.pageInfo.endCursor);\n  setHasNext(data.allPeople.pageInfo.hasNextPage);\n  return React.createElement(CharactersView, {\n    characters: characters,\n    character: character,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  });\n}","map":{"version":3,"sources":["/Users/luisbenavides/Sites/listview-master-detail-viewdemo/src/components/app.js"],"names":["React","useState","useQuery","ALL_CHARACTERS","ErrorView","LoadingView","CharactersView","App","characters","setCharacters","after","setAfter","length","character","hasNext","setHasNext","counter","variables","onCompleted","Promise","resolve","setTimeout","refetch","loading","error","data","allPeople","edges","pageInfo","endCursor","hasNextPage"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,SAAQC,QAAR,QAAuB,qBAAvB;AAEA,OAAO,sCAAP;AACA,OAAO,6BAAP;AAGA,SAAQC,cAAR,QAA6B,YAA7B;AAEA,OAAOC,SAAP,MAAsB,oBAAtB;AACA,OAAOC,WAAP,MAAwB,sBAAxB;AACA,OAAOC,cAAP,MAA2B,yBAA3B;AAGA,eAAe,SAASC,GAAT,GAAe;AAAA,kBACMN,QAAQ,CAAC,EAAD,CADd;AAAA;AAAA,MACvBO,UADuB;AAAA,MACXC,aADW;;AAAA,mBAEJR,QAAQ,CAAC,EAAD,CAFJ;AAAA;AAAA,MAEvBS,KAFuB;AAAA,MAEhBC,QAFgB;;AAAA,mBAGbV,QAAQ,CAAC,CAAD,CAHK;AAAA;AAAA,MAGvBW,MAHuB;;AAI5B,MAAIC,SAAS,GAAGZ,QAAQ,CAAC,IAAD,CAAxB;;AAJ4B,mBAKAA,QAAQ,CAAC,IAAD,CALR;AAAA;AAAA,MAKvBa,OALuB;AAAA,MAKdC,UALc;;AAAA,mBAOZd,QAAQ,CAAC,CAAD,CAPI;AAAA;AAAA,MAOvBe,OAPuB;;AAAA,oBASYd,QAAQ,CAACC,cAAD,EAAiB;AAC/Dc,IAAAA,SAAS,EAAE;AAACP,MAAAA,KAAK,EAAEA,KAAR;AAAeE,MAAAA,MAAM,EAAEA;AAAvB,KADoD;AACpBM,IAAAA,WAAW,EAAE,YAAY;AAClE,UAAGJ,OAAO,IAAIE,OAAO,GAACJ,MAAtB,EAA6B;AAC3BI,QAAAA,OAAO;AACP,eAAO,IAAIG,OAAJ,CAAYC,OAAO,IAAI;AAC5BC,UAAAA,UAAU,CAAC,MAAM;AACfD,YAAAA,OAAO,CAACE,OAAO,CAAC;AAACZ,cAAAA,KAAK,EAAEA,KAAR;AAAeE,cAAAA,MAAM,EAAEA;AAAvB,aAAD,CAAR,CAAP;AACD,WAFS,EAEP,IAFO,CAAV;AAGD,SAJM,CAAP;AAKD;AACF;AAV8D,GAAjB,CATpB;AAAA,QASrBW,OATqB,aASrBA,OATqB;AAAA,QASZC,KATY,aASZA,KATY;AAAA,QASLC,IATK,aASLA,IATK;AAAA,QASCH,OATD,aASCA,OATD;;AAsB5B,MAAIC,OAAJ,EAAa,OAAO,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP;AACb,MAAIC,KAAJ,EAAW,OAAO,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP;AAEXf,EAAAA,aAAa,CAAC,CAAC,GAAGD,UAAJ,EAAgB,GAAGiB,IAAI,CAACC,SAAL,CAAeC,KAAlC,CAAD,CAAb;AACAhB,EAAAA,QAAQ,CAACc,IAAI,CAACC,SAAL,CAAeE,QAAf,CAAwBC,SAAzB,CAAR;AACAd,EAAAA,UAAU,CAACU,IAAI,CAACC,SAAL,CAAeE,QAAf,CAAwBE,WAAzB,CAAV;AAEA,SAAQ,oBAAC,cAAD;AAAgB,IAAA,UAAU,EAAEtB,UAA5B;AAAwC,IAAA,SAAS,EAAEK,SAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAR;AACD","sourcesContent":["import React, {useState} from \"react\";\nimport {useQuery} from \"@apollo/react-hooks\";\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport \"./../assets/scss/style.scss\";\n\n\nimport {ALL_CHARACTERS} from \"../queries\";\n\nimport ErrorView from \"../views/errorView\";\nimport LoadingView from \"../views/loadingView\";\nimport CharactersView from \"../views/charactersView\";\n\n\nexport default function App() {\n  let [characters, setCharacters] = useState([]);\n  let [after, setAfter] = useState(\"\");\n  let [length] = useState(5);\n  let character = useState(null);\n  let [hasNext, setHasNext] = useState(true);\n\n  let [counter] = useState(1);\n\n  const {loading, error, data, refetch} = useQuery(ALL_CHARACTERS, {\n    variables: {after: after, length: length}, onCompleted: async () => {\n      if(hasNext && counter<length){\n        counter++;\n        return new Promise(resolve => {\n          setTimeout(() => {\n            resolve(refetch({after: after, length: length}));\n          }, 1000);\n        });\n      }\n    }\n  });\n\n  if (loading) return <LoadingView/>;\n  if (error) return <ErrorView/>;\n\n  setCharacters([...characters, ...data.allPeople.edges]);\n  setAfter(data.allPeople.pageInfo.endCursor);\n  setHasNext(data.allPeople.pageInfo.hasNextPage);\n\n  return (<CharactersView characters={characters} character={character}/>);\n}"]},"metadata":{},"sourceType":"module"}